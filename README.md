# **PLATFORM**
#### **Video Demo:** <URL>
#### **Description:** In my final project for cs50, PLATFORM, I made an infinite-parkour-like game where you start as a little robot in a island and need to jump from falling platforms from the sky to other platforms so you dont fall to the abyss. The only goal in the game is not to fall, you get points as time passes and you keep jumping if you fall the game restarts and lets you play again.
#### In the root folder you can find 3 parents folders, *Assets*, *Scenes* and *Scripts*.
#### ***Assets:*** In this folder there is my sprites i used for the game and the fonts and background image of the sky i also used. There it also a *Music* folder where there is the music and sounds used in the game.
#### ***Scenes:*** In this folder you can find the *Main* scene where al the other scenes converge, this are *wooden_platform*, *main_menu*, *HUD*, *background*, *fall_dead* and *robot*;
 + *background.tscn:* This scene only contains Textures for the background image, in this game it is a blue sky with clouds.
 + *HUD.tscn:* This scene contains a texture and a label, its function is for the score progression.
 + *main_menu.tscn:* This scene contains a texture with a grid where there is 3 other textures, one for the tittle and the score, other is a button so you can start the game, this button changes sprites when clicked and other texture that displays the credits of the game.
 + *wooden_platform.tscn:* This scene contains a sprite for the falling platforms, it also have the collision shape so the player can stay on top of them.
 + *fall_dead.tscn:* This scene is only a world boundary with a timer, the world boundary work like a invisible line that is the size of all the possible space in the X axis. It's used to detect the player off screen starting the timer making it like the player fell to dead.
 + *robot.tscn:* This scene contains the character body and sprites with their animations, collision shapes and sound that plays when double jumping.
 + *main.tscn:* This scene, like the name says, is the main scene of the game, here all the other scene converge to make the game run. There is also some timers so some functions start working and a tile map (object drawed with squared) for the starting island and the background music that plays during the game.
#### ***Scripts:*** In this folder are all the scripts I wrote to make the game function and run smoothly they work with some functions provided by godot engine that comes with the program i used for the game.
 + *wood_platform.gd:* This short script makes it so the platform once spawned have a direction and speed. It starts with a variable for the speed and the physics_process function wich is a function provided by godot that handles their physics system. In this function there is a variable for the direction wich uses Vector2, Vector2 uses 2 axis (x, y) and in this function uses the Vector2 in the DOWN direction, wich is positive Y (godot uses x and y axis where x goes positive to the right and y goes positive down in the screen) once this variable is active, it get the position of the body (wood_platform) in the scene and changes it position by the direction times the speed, so it looks like the platform is going down in the screen making it look like its falling.
 + *fall_dead.gd:* This script uses the function body_entered making it detect all the collisions shapes it touches the world boundary. When it detect something in its collision shape it starts a timer for 3 seconds and plays a sound. When the timer finish is would detect the current scene that its playing and reload it, making it look like the game restart at the beginning.
 + *main_menu.gd:* This script is short but needed to the game to start. When clicking in the play button at the start of the game it emits a signal to the main scene and hides the main menu.
 + *robot.gd:* This script handles all the movement and animations of the player character. The script starts by stating some variables and constants used in the script, first the speed and jump velocity constants needed to control both the speeds so if needed to change it only needs to change 1 time here. Then states the screen size variable getting the window borders of the proyect with a builtin function of godot and stating the gavity and making a boolean statement if the player can or cannot double jump.
 In the physics_process function it determine, using a built in function named is_on_floor, which it detects if the player is not falling and is touching some "floor". if it is not in a floor it will make the velocity in the Y axis increases by the gravity times delta (Delta is something from the engine used so the sprite in cuestion doesnt loose frames when moving and move smoothly) making it fall at the gravity provided before.
 Then it makes a if statement so when and only when clicking the "Jump" button (W) and only when is_on_floor it will make de Y velocity equal the jump velocity making it like the player is jumping, so when pressing 'W' the player would go up in the Y axis and stop touching the floor, tehn by not touching the floor it will make it so the gravity plays in action and making the player go down in the Y axis.
 Also I made an if statement  where if the player is on the floor, it would make the boolean can_double_jump true and make another if statement where only if it isnt on the floor and the ca_double_jump is true and the jump action is pressed, the player would go up in the Y axis at the jump velocity and makes the boolean can_double_jump false. This is needed so the player can only double jump once it jumped 1 time from the floor and cant double jump every time it isnt on the floor.
 Then to handle the movement of the player gets the variable direction and asigns 2 inputs to it (Left and Right) and starts an if statement where makes once pressed the inputs it would take that direction (left = -1, right = +1) times the speed so it would move to the right and to the left or else it would move the player towrd 0 by the peed from the direction so it makes the player stop conce no input is pressed. Because when the player is not moving the velocity is 0, once you press an input you make its velocity +1 or -1 and when you stop pressing the inputs it goes back to 0. Then it makes if statements for the animation like if the velocity is 0 it would play the idle animation and if the velocity is +1 or -1 it would play the walking animation and flip the sprite so it look at that direction or else it would play the jump animation because it would mean the player is in the air.
 And finish with the built in move_and_slide function wich makes it so the player move by the velocity and not by the position in the Axis
 Then it is the wrap_screen function which is 2 if statement where if the position of the player is greater than the screen size of the window it would make the X axis position of the player 0 and if the player position is less than 0 it would make the X axis position of the player the screen size of the window. This function makes it so the player if leaving the screen at both sides they would wrap around to the other side of the screen so you can jump from one side to the other.
 + *main.gd:* This scripts have some diverse functions that starts and stops thing of the scenes and generate an array and spawn the platforms.
 From the start we have the _ready function wich is a builtin function that goes first always, like its name says its always ready, here we connect the signal form the main_menu.gd script and hide the player sprite and the HUD sprite.
 Then it awaits until the player click on the play button a the main_menu.tscn where the signal is emit and received by this cript and starts the new_game function, in this function it show the player sprite, plays the music clears the array of platforms, spawn the first platform, resets the score to 0, show the HUD sprite and starts the start timer and the island timer.
 When the start timer finish, it starts the score timer and the platform timer. The island timer when finishes it changes the position of the island outside of the screen making it like it dissapeared. Once the platform timer fisnish it spawn another platform and each time the Score timer finish it increases the score by 1 and starts the function update_score, this function changes the text on the HUD to visualise the actual score each time it goes by 1. Then when falling it starts the game_over function wich it stops all the timers, shows the main_menu with only the current score before you fell.
 The spawn_platform function instance the wooden_plaftorm.tscn every time the timer finishes spawning them at the center of the camera of the player and offsetting them 400 pixels up (making them spawn outside of the screen) and only in a range of 480 pixels form 0 wich is the size of the screen, then once its spawn it is added to the array. The need of an array is because its easier to clear them all at once than removing each one every time they needs no be removed.
